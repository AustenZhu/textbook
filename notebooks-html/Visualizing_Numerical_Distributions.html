<div id="ipython-notebook">
            <a class="interact-button" href="http://data8r.datahub.berkeley.edu/user-redirect/interact?account=data-8r&repo=textbook&path=notebooks/top_movies.csv&path=notebooks/Visualizing_Numerical_Distributions.ipynb">Interact</a>
            
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [['$','$']],
      processEscapes: true
    }
  });
</script>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Many of the variables that data scientists study are <em>quantitative</em> or <em>numerical</em>. Their values are numbers on which you can perform arithmetic. Examples that we have seen include the number of periods in chapters of a book, the amount of money made by movies, and the age of people in the United States.</p>
<p>The values of a categorical variable can be given numerical codes, but that doesn't make the variable quantitative. In the example in which we studied Census data broken down by age group, the categorial variable <code>SEX</code> had the numerical codes <code>1</code> for 'Male,' <code>2</code> for 'Female,' and <code>0</code> for the aggregate of both groups <code>1</code> and <code>2</code>. While 0, 1, and 2 are numbers, in this context it doesn't make sense to subtract 1 from 2, or take the average of 0, 1, and 2, or perform other arithmetic on the three values. <code>SEX</code> is a categorical variable even though the values have been given a numerical code.</p></div></div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>For our main example, we will return to a dataset that we studied when we were visualizing categorical data. It is the table <code>top</code>, which consists of data from U.S.A.'s top grossing movies of all time. For convenience, here is the description of the table again.</p>
<p>The first column contains the title of the movie. The second column contains the name of the studio that produced the movie. The third contains the domestic box office gross in dollars, and the fourth contains the  gross amount that would have been earned from ticket sales at 2016 prices. The fifth contains the release year of the movie.</p>
<p>There are 200 movies on the list. Here are the top ten according to the unadjusted gross receipts in the column <code>Gross</code>.</p></div></div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">top</span> <span class="o">=</span> <span class="n">Table</span><span class="o">.</span><span class="n">read_table</span><span class="p">(</span><span class="s1">'top_movies.csv'</span><span class="p">)</span>
<span class="c1"># Make the numbers in the Gross and Gross (Adjusted) columns look nicer:</span>
<span class="n">top</span><span class="o">.</span><span class="n">set_format</span><span class="p">([</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="n">NumberFormatter</span><span class="p">)</span>
<span class="n">top</span>
</pre></div></div></div>
<div class="output_html rendered_html output_subarea output_execute_result">
<table border="1" class="dataframe">
    <thead>
        <tr>
            <th>Title</th> <th>Studio</th> <th>Gross</th> <th>Gross (Adjusted)</th> <th>Year</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>Star Wars: The Force Awakens             </td> <td>Buena Vista (Disney)</td> <td>906,723,418</td> <td>906,723,400     </td> <td>2015</td>
        </tr>
    </tbody>
        <tbody><tr>
            <td>Avatar                                   </td> <td>Fox                 </td> <td>760,507,625</td> <td>846,120,800     </td> <td>2009</td>
        </tr>
    </tbody>
        <tbody><tr>
            <td>Titanic                                  </td> <td>Paramount           </td> <td>658,672,302</td> <td>1,178,627,900   </td> <td>1997</td>
        </tr>
    </tbody>
        <tbody><tr>
            <td>Jurassic World                           </td> <td>Universal           </td> <td>652,270,625</td> <td>687,728,000     </td> <td>2015</td>
        </tr>
    </tbody>
        <tbody><tr>
            <td>Marvel's The Avengers                    </td> <td>Buena Vista (Disney)</td> <td>623,357,910</td> <td>668,866,600     </td> <td>2012</td>
        </tr>
    </tbody>
        <tbody><tr>
            <td>The Dark Knight                          </td> <td>Warner Bros.        </td> <td>534,858,444</td> <td>647,761,600     </td> <td>2008</td>
        </tr>
    </tbody>
        <tbody><tr>
            <td>Star Wars: Episode I - The Phantom Menace</td> <td>Fox                 </td> <td>474,544,677</td> <td>785,715,000     </td> <td>1999</td>
        </tr>
    </tbody>
        <tbody><tr>
            <td>Star Wars                                </td> <td>Fox                 </td> <td>460,998,007</td> <td>1,549,640,500   </td> <td>1977</td>
        </tr>
    </tbody>
        <tbody><tr>
            <td>Avengers: Age of Ultron                  </td> <td>Buena Vista (Disney)</td> <td>459,005,868</td> <td>465,684,200     </td> <td>2015</td>
        </tr>
    </tbody>
        <tbody><tr>
            <td>The Dark Knight Rises                    </td> <td>Warner Bros.        </td> <td>448,139,099</td> <td>500,961,700     </td> <td>2012</td>
        </tr>
    </tbody>
</table>
<p>... (190 rows omitted)</p></div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Visualizing-the-distribution-of-the-adjusted-receipts">Visualizing the distribution of the adjusted receipts<a class="anchor-link" href="#Visualizing-the-distribution-of-the-adjusted-receipts">¶</a></h3><p>In this section we will draw graphs of the distribution of the numerical variable in the column <code>Gross (Adjusted)</code>. Since three-digit numbers are easier to work with than nine-digit numbers, let's measure the <code>Adjusted Gross</code> receipts in millions of dollars. Note how <code>round</code> is used to retain only two decimal places.</p></div></div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">millions</span> <span class="o">=</span> <span class="n">top</span><span class="o">.</span><span class="n">with_column</span><span class="p">(</span><span class="s1">'Adjusted Gross'</span><span class="p">,</span> 
                           <span class="n">np</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">top</span><span class="o">.</span><span class="n">column</span><span class="p">(</span><span class="s2">"Gross (Adjusted)"</span><span class="p">)</span><span class="o">/</span><span class="mf">1e6</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
<span class="n">millions</span>
</pre></div></div></div>
<div class="output_html rendered_html output_subarea output_execute_result">
<table border="1" class="dataframe">
    <thead>
        <tr>
            <th>Title</th> <th>Studio</th> <th>Gross</th> <th>Gross (Adjusted)</th> <th>Year</th> <th>Adjusted Gross</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>Star Wars: The Force Awakens             </td> <td>Buena Vista (Disney)</td> <td>906,723,418</td> <td>906,723,400     </td> <td>2015</td> <td>906.72        </td>
        </tr>
    </tbody>
        <tbody><tr>
            <td>Avatar                                   </td> <td>Fox                 </td> <td>760,507,625</td> <td>846,120,800     </td> <td>2009</td> <td>846.12        </td>
        </tr>
    </tbody>
        <tbody><tr>
            <td>Titanic                                  </td> <td>Paramount           </td> <td>658,672,302</td> <td>1,178,627,900   </td> <td>1997</td> <td>1178.63       </td>
        </tr>
    </tbody>
        <tbody><tr>
            <td>Jurassic World                           </td> <td>Universal           </td> <td>652,270,625</td> <td>687,728,000     </td> <td>2015</td> <td>687.73        </td>
        </tr>
    </tbody>
        <tbody><tr>
            <td>Marvel's The Avengers                    </td> <td>Buena Vista (Disney)</td> <td>623,357,910</td> <td>668,866,600     </td> <td>2012</td> <td>668.87        </td>
        </tr>
    </tbody>
        <tbody><tr>
            <td>The Dark Knight                          </td> <td>Warner Bros.        </td> <td>534,858,444</td> <td>647,761,600     </td> <td>2008</td> <td>647.76        </td>
        </tr>
    </tbody>
        <tbody><tr>
            <td>Star Wars: Episode I - The Phantom Menace</td> <td>Fox                 </td> <td>474,544,677</td> <td>785,715,000     </td> <td>1999</td> <td>785.72        </td>
        </tr>
    </tbody>
        <tbody><tr>
            <td>Star Wars                                </td> <td>Fox                 </td> <td>460,998,007</td> <td>1,549,640,500   </td> <td>1977</td> <td>1549.64       </td>
        </tr>
    </tbody>
        <tbody><tr>
            <td>Avengers: Age of Ultron                  </td> <td>Buena Vista (Disney)</td> <td>459,005,868</td> <td>465,684,200     </td> <td>2015</td> <td>465.68        </td>
        </tr>
    </tbody>
        <tbody><tr>
            <td>The Dark Knight Rises                    </td> <td>Warner Bros.        </td> <td>448,139,099</td> <td>500,961,700     </td> <td>2012</td> <td>500.96        </td>
        </tr>
    </tbody>
</table>
<p>... (190 rows omitted)</p></div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="A-bar-chart:-The-wrong-visualization">A bar chart: The wrong visualization<a class="anchor-link" href="#A-bar-chart:-The-wrong-visualization">¶</a></h4><p>We could use a bar chart to display the distribution of adjusted gross receipts, but it doesn't work very well.</p></div></div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">by_gross</span> <span class="o">=</span> <span class="n">millions</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="s1">'Adjusted Gross'</span><span class="p">)</span>
<span class="n">gross_percents</span> <span class="o">=</span> <span class="mi">100</span> <span class="o">*</span> <span class="n">by_gross</span><span class="o">.</span><span class="n">column</span><span class="p">(</span><span class="s1">'count'</span><span class="p">)</span> <span class="o">/</span> <span class="nb">sum</span><span class="p">(</span><span class="n">by_gross</span><span class="o">.</span><span class="n">column</span><span class="p">(</span><span class="s1">'count'</span><span class="p">))</span>
<span class="n">with_percents</span> <span class="o">=</span> <span class="n">by_gross</span><span class="o">.</span><span class="n">with_column</span><span class="p">(</span><span class="s2">"Percentage"</span><span class="p">,</span> <span class="n">gross_percents</span><span class="p">)</span>
<span class="n">with_percents</span><span class="o">.</span><span class="n">barh</span><span class="p">(</span><span class="s1">'Adjusted Gross'</span><span class="p">,</span> <span class="s1">'Percentage'</span><span class="p">)</span>
</pre></div></div></div>
<div class="output_png output_subarea ">
<img src="/notebooks-images/Visualizing_Numerical_Distributions_7_0.png"/></div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>There are two problems:</p>
<ol>
<li>Two movies made \$341.91 million, two movies made \$522.0 million, and all other movies made unique amounts of money.  So the bars don't really summarize anything for us.</li>
<li>The bars aren't spaced in a way that shows differences in amounts.  The last bar, for Gone with the Wind, is right next to the second-to-last bar, even though they are \$200 million apart.  The first and second bars are also right next to each other, and the difference between the dollar amounts is only \$440,000.</li>
</ol></div></div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="A-histogram">A histogram<a class="anchor-link" href="#A-histogram">¶</a></h3><p>A <em>histogram</em> of a numerical dataset looks very much like a bar chart, though it has some important differences that we will examine in this section. First, let's just draw a histogram of the adjusted receipts.</p>
<p>The <code>hist</code> method generates a histogram of the values in a column. The optional <code>unit</code> argument is used to help label the two axes. The histogram shows the distribution of the adjusted gross amounts, in millions of 2016 dollars.  Specifically, it shows the <em>frequency</em> distribution - percentages of movies rather than counts of movies.</p></div></div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">millions</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="s1">'Adjusted Gross'</span><span class="p">,</span> <span class="n">unit</span><span class="o">=</span><span class="s2">"Million Dollars"</span><span class="p">)</span>
</pre></div></div></div>
<div class="output_png output_subarea ">
<img src="/notebooks-images/Visualizing_Numerical_Distributions_10_0.png"/></div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="The-horizontal-axis">The horizontal axis<a class="anchor-link" href="#The-horizontal-axis">¶</a></h3><p>To solve the first problem with the bar chart, a histogram groups the numbers into contiguous intervals called <em>bins</em>. To solve the second problem, we lay the bars across the bins they cover, so that bars that are further apart represent numbers that are more dissimilar.</p>
<p>For example, the leftmost bin corresponds to the leftmost bar and goes from roughly \$325 million to roughly \$450 million.  For this histogram, it is a little hard to see exactly where the ends of the bins are situated.</p>
<p>We can see that there are 10 bins (some bars are so low that they are hard to see), and that they all have the same width. We can also see that none of the movies grossed fewer than 300 million dollars; that is because we are considering only the top grossing movies of all time.</p></div></div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="Details-about-binning">Details about binning<a class="anchor-link" href="#Details-about-binning">¶</a></h4><p>Although in this dataset no movie grossed an amount that is exactly on the edge between two bins, <code>hist</code> does have to account for situations where there might have been values at the edges. So <code>hist</code> has an <em>endpoint convention</em>: bins include the data at their left endpoint, but not the data at their right endpoint.</p>
<p>We will use the notation [<em>a</em>, <em>b</em>) for the bin that starts at <em>a</em> and ends at <em>b</em> but doesn't include <em>b</em>.</p>
<p>Sometimes, adjustments have to be made in the first or last bin, to ensure that the smallest and largest values of the variable are included. You saw an example of such an adjustment in the Census data studied earlier, where an age of "100" years actually meant "100 years old or older."</p>
<p>The optional named argument <code>bins</code> can be used with <code>hist</code> to specify the endpoints of the bins. It must consist of an array of numbers that starts with the left end of the first bin and ends with the right end of the last bin. We will start by setting the numbers in <code>bins</code> to be 300, 350, 400, and so on, ending with 2000.</p></div></div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">bin_width</span> <span class="o">=</span> <span class="mi">50</span>
<span class="n">millions</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="s1">'Adjusted Gross'</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">300</span><span class="p">,</span><span class="mi">2000</span><span class="o">+</span><span class="n">bin_width</span><span class="p">,</span><span class="n">bin_width</span><span class="p">),</span> <span class="n">unit</span><span class="o">=</span><span class="s2">"Million Dollars"</span><span class="p">)</span>
</pre></div></div></div>
<div class="output_png output_subarea ">
<img src="/notebooks-images/Visualizing_Numerical_Distributions_13_0.png"/></div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The horizontal axis of this figure is easier to read. The labels 200, 400, 600, and so on are centered at the corresponding values. The tallest bar is for movies that grossed between \$350 million and \$400 million.</p>
<p>A very small number of movies grossed 800 million dollars or more. This results in the figure being "skewed to the right," or, less formally, having "a long right hand tail." Distributions of variables like income or rent in large populations also often have this kind of shape.</p></div></div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="The-counts-in-the-bins">The counts in the bins<a class="anchor-link" href="#The-counts-in-the-bins">¶</a></h3><p>The counts of values in the bins can be computed from a table using the <code>bin</code> method, which takes a column label and an optional sequence or number of bins. The result is a tabular form of a histogram. The first column lists the left endpoints of the bins (but see the note about the final value, below). The second column contains the counts of all values in the <code>Adjusted Gross</code> column that are in the corresponding bin. That is, it counts all the <code>Adjusted Gross</code> values that are greater than or equal to the value in <code>bin</code>, but less than the next value in <code>bin</code>.</p></div></div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">bin_counts</span> <span class="o">=</span> <span class="n">millions</span><span class="o">.</span><span class="n">bin</span><span class="p">(</span><span class="s1">'Adjusted Gross'</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">300</span><span class="p">,</span><span class="mi">2000</span><span class="o">+</span><span class="n">bin_width</span><span class="p">,</span><span class="n">bin_width</span><span class="p">))</span>
<span class="n">bin_counts</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div></div></div>
<div class="output_html rendered_html output_subarea ">
<table border="1" class="dataframe">
    <thead>
        <tr>
            <th>bin</th> <th>Adjusted Gross count</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>300 </td> <td>32                  </td>
        </tr>
    </tbody>
        <tbody><tr>
            <td>350 </td> <td>49                  </td>
        </tr>
    </tbody>
        <tbody><tr>
            <td>400 </td> <td>25                  </td>
        </tr>
    </tbody>
        <tbody><tr>
            <td>450 </td> <td>27                  </td>
        </tr>
    </tbody>
        <tbody><tr>
            <td>500 </td> <td>16                  </td>
        </tr>
    </tbody>
        <tbody><tr>
            <td>550 </td> <td>12                  </td>
        </tr>
    </tbody>
        <tbody><tr>
            <td>600 </td> <td>9                   </td>
        </tr>
    </tbody>
        <tbody><tr>
            <td>650 </td> <td>7                   </td>
        </tr>
    </tbody>
        <tbody><tr>
            <td>700 </td> <td>2                   </td>
        </tr>
    </tbody>
        <tbody><tr>
            <td>750 </td> <td>5                   </td>
        </tr>
    </tbody>
        <tbody><tr>
            <td>800 </td> <td>2                   </td>
        </tr>
    </tbody>
        <tbody><tr>
            <td>850 </td> <td>3                   </td>
        </tr>
    </tbody>
        <tbody><tr>
            <td>900 </td> <td>2                   </td>
        </tr>
    </tbody>
        <tbody><tr>
            <td>950 </td> <td>1                   </td>
        </tr>
    </tbody>
        <tbody><tr>
            <td>1000</td> <td>0                   </td>
        </tr>
    </tbody>
        <tbody><tr>
            <td>1050</td> <td>1                   </td>
        </tr>
    </tbody>
        <tbody><tr>
            <td>1100</td> <td>2                   </td>
        </tr>
    </tbody>
        <tbody><tr>
            <td>1150</td> <td>1                   </td>
        </tr>
    </tbody>
        <tbody><tr>
            <td>1200</td> <td>2                   </td>
        </tr>
    </tbody>
        <tbody><tr>
            <td>1250</td> <td>0                   </td>
        </tr>
    </tbody>
        <tbody><tr>
            <td>1300</td> <td>0                   </td>
        </tr>
    </tbody>
        <tbody><tr>
            <td>1350</td> <td>0                   </td>
        </tr>
    </tbody>
        <tbody><tr>
            <td>1400</td> <td>0                   </td>
        </tr>
    </tbody>
        <tbody><tr>
            <td>1450</td> <td>0                   </td>
        </tr>
    </tbody>
        <tbody><tr>
            <td>1500</td> <td>1                   </td>
        </tr>
    </tbody>
        <tbody><tr>
            <td>1550</td> <td>0                   </td>
        </tr>
    </tbody>
        <tbody><tr>
            <td>1600</td> <td>0                   </td>
        </tr>
    </tbody>
        <tbody><tr>
            <td>1650</td> <td>0                   </td>
        </tr>
    </tbody>
        <tbody><tr>
            <td>1700</td> <td>0                   </td>
        </tr>
    </tbody>
        <tbody><tr>
            <td>1750</td> <td>1                   </td>
        </tr>
    </tbody>
        <tbody><tr>
            <td>1800</td> <td>0                   </td>
        </tr>
    </tbody>
        <tbody><tr>
            <td>1850</td> <td>0                   </td>
        </tr>
    </tbody>
        <tbody><tr>
            <td>1900</td> <td>0                   </td>
        </tr>
    </tbody>
        <tbody><tr>
            <td>1950</td> <td>0                   </td>
        </tr>
    </tbody>
        <tbody><tr>
            <td>2000</td> <td>0                   </td>
        </tr>
    </tbody>
</table></div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><strong>A detail about binning:</strong> Notice the <code>bin</code> value 2000 in the last row. That's not the left end-point of any bar – it's the right end point of the last bar. By the endpoint convention, the data there are not included. So the corresponding <code>count</code> is recorded as 0, and would have been recorded as 0 even if there had been movies that made more than \$2,000$ million dollars. When either <code>bin</code> or <code>hist</code> is called with a <code>bins</code> argument, the graph only considers values that are in the specified bins.</p>
<p>Once values have been binned, the resulting counts can be used to generate a histogram using the <code>bin_column</code> named argument to specify which column contains the bin lower bounds.</p></div></div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">bin_counts</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="s1">'Adjusted Gross count'</span><span class="p">,</span> <span class="n">bin_column</span><span class="o">=</span><span class="s1">'bin'</span><span class="p">,</span> <span class="n">unit</span><span class="o">=</span><span class="s1">'Million Dollars'</span><span class="p">)</span>
</pre></div></div></div>
<div class="output_png output_subarea ">
<img src="/notebooks-images/Visualizing_Numerical_Distributions_18_0.png"/></div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="The-vertical-axis:-density-scale">The vertical axis: density scale<a class="anchor-link" href="#The-vertical-axis:-density-scale">¶</a></h3><p>The horizontal axis of a histogram is straightforward to read, once we have taken care of details like the ends of the bins. The features of the vertical axis require a little more attention. We will go over them one by one.</p>
<p>Let's start by examining how to calculate the numbers on the vertical axis. If the calculation seems a little strange, have patience – the rest of the section will explain the reasoning.</p>
<p><strong>Calculation.</strong> The height of each bar is the percent of elements that fall into the corresponding bin, relative to the width of the bin.</p></div></div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">counts</span> <span class="o">=</span> <span class="n">bin_counts</span><span class="o">.</span><span class="n">relabeled</span><span class="p">(</span><span class="s1">'Adjusted Gross count'</span><span class="p">,</span> <span class="s1">'Count'</span><span class="p">)</span>
<span class="n">total_count</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">counts</span><span class="o">.</span><span class="n">column</span><span class="p">(</span><span class="s1">'Count'</span><span class="p">))</span> <span class="c1"># This is 200</span>
<span class="n">proportions</span> <span class="o">=</span> <span class="n">counts</span><span class="o">.</span><span class="n">with_column</span><span class="p">(</span>
    <span class="s1">'Proportion'</span><span class="p">,</span> <span class="p">(</span><span class="n">counts</span><span class="o">.</span><span class="n">column</span><span class="p">(</span><span class="s1">'Count'</span><span class="p">)</span><span class="o">/</span><span class="n">total_count</span><span class="p">)</span>
    <span class="p">)</span>
<span class="n">percents</span> <span class="o">=</span> <span class="n">proportions</span><span class="o">.</span><span class="n">with_column</span><span class="p">(</span>
    <span class="s1">'Percent'</span><span class="p">,</span> <span class="n">proportions</span><span class="o">.</span><span class="n">column</span><span class="p">(</span><span class="s1">'Proportion'</span><span class="p">)</span><span class="o">*</span><span class="mi">100</span>
    <span class="p">)</span>
<span class="n">heights</span> <span class="o">=</span> <span class="n">percents</span><span class="o">.</span><span class="n">with_column</span><span class="p">(</span>
    <span class="s1">'Height'</span><span class="p">,</span> <span class="n">percents</span><span class="o">.</span><span class="n">column</span><span class="p">(</span><span class="s1">'Percent'</span><span class="p">)</span><span class="o">/</span><span class="n">bin_width</span> <span class="c1"># bin_width is 50</span>
    <span class="p">)</span>
<span class="n">heights</span>
</pre></div></div></div>
<div class="output_html rendered_html output_subarea output_execute_result">
<table border="1" class="dataframe">
    <thead>
        <tr>
            <th>bin</th> <th>Count</th> <th>Proportion</th> <th>Percent</th> <th>Height</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>300 </td> <td>32   </td> <td>0.16      </td> <td>16     </td> <td>0.32  </td>
        </tr>
    </tbody>
        <tbody><tr>
            <td>350 </td> <td>49   </td> <td>0.245     </td> <td>24.5   </td> <td>0.49  </td>
        </tr>
    </tbody>
        <tbody><tr>
            <td>400 </td> <td>25   </td> <td>0.125     </td> <td>12.5   </td> <td>0.25  </td>
        </tr>
    </tbody>
        <tbody><tr>
            <td>450 </td> <td>27   </td> <td>0.135     </td> <td>13.5   </td> <td>0.27  </td>
        </tr>
    </tbody>
        <tbody><tr>
            <td>500 </td> <td>16   </td> <td>0.08      </td> <td>8      </td> <td>0.16  </td>
        </tr>
    </tbody>
        <tbody><tr>
            <td>550 </td> <td>12   </td> <td>0.06      </td> <td>6      </td> <td>0.12  </td>
        </tr>
    </tbody>
        <tbody><tr>
            <td>600 </td> <td>9    </td> <td>0.045     </td> <td>4.5    </td> <td>0.09  </td>
        </tr>
    </tbody>
        <tbody><tr>
            <td>650 </td> <td>7    </td> <td>0.035     </td> <td>3.5    </td> <td>0.07  </td>
        </tr>
    </tbody>
        <tbody><tr>
            <td>700 </td> <td>2    </td> <td>0.01      </td> <td>1      </td> <td>0.02  </td>
        </tr>
    </tbody>
        <tbody><tr>
            <td>750 </td> <td>5    </td> <td>0.025     </td> <td>2.5    </td> <td>0.05  </td>
        </tr>
    </tbody>
</table>
<p>... (25 rows omitted)</p></div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Go over the numbers on the vertical axis of the histogram above to check that the column <code>Heights</code> looks correct.</p></div></div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The calculations will become clear if we just examine the first row of the table.</p>
<p>Remember that there are 200 movies in the dataset. The [300, 350) bin contains 32 movies. That's 16% of all the movies:
$$
\mbox{Percent} = \frac{32}{200} \cdot 100 = 16
$$</p>
<p>The width of the [300, 350) bin is $ 350 - 300 = 50$. So
$$
\mbox{Height} = \frac{16}{50} = 0.32
$$</p>
<p>The code for calculating the heights used the facts that there are 200 movies in all and that the width of each bin is 50.</p></div></div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><strong>Units.</strong> The height of the bar is 40.5% divided by 100 million dollars, and so the height is 0.405% per million dollars.</p></div></div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="The-area-principle">The area principle<a class="anchor-link" href="#The-area-principle">¶</a></h3><p>The intricate calculation of heights comes down to one requirement: The area of each bar should represent the amount of stuff in the corresponding bin in the distribution we're trying to show.  We saw in the previous section why this is an important requirement.  Since we're displaying the frequency distribution of gross receipts, the area of a bar should represent the percentage of movies in the corresponding bin.</p>
<p>In a bar chart, we were lax about the distinction between lengths and areas because the horizontal axis had no real meaning.  The categories were arranged however we wanted to arrange them, so we could always think of the width of a bar as 1.</p>
<p>In a histogram, the horizontal axis is a number line, so the width of a bar is an actual number.  This means we have to take the distinction between length and area seriously.  Their relationship is:</p>
<p><img alt="Histogram bar area formula" src="/images/histogram_area.png"/></p>
$$\text{Area of bar} = \text{Width of bar} \times \text{Length of bar}$$$$\text{Length of bar} = \frac{\text{Area of bar} } {\text{Width of bar} }$$<p>The area principle tells us we should ensure that:</p>
$$\text{Area of bar} = \text{Percentage in corresponding bin}$$<p>Putting these together, we have:</p>
$$\text{Length of bar} = \frac{\text{Area of bar} } {\text{Width of bar} } = \frac{\text{Percentage in corresponding bin} } {\text{Width of bar} }$$<p>Since the top is a percentage, and the bottom is in the horizontal axis units (the units of the numbers whose distribution we're plotting), the units of length are $\frac{\text{Percentage } } {\text{Horizontal axis unit} }$.  The vertical axis is said to be <em>on the density scale</em>. The height of bar is <strong>not</strong> the percent of entries in the bin; it is the percent of entries in the bin relative to the amount of space in the bin. That is why the height measures crowdedness or <em>density</em>.</p></div></div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Histograms-for-count-distributions">Histograms for count distributions<a class="anchor-link" href="#Histograms-for-count-distributions">¶</a></h3><p>Just as a bar chart can display either a count or a frequency distribution, it is possible to create a histogram to display a count distribution.  In that case, we would still want to satisfy the area principle, so we would have:</p>
$$\text{Area of bar} = \text{Count in corresponding bin},$$<p>and so:</p>
$$\text{Length of bar} = \frac{\text{Area of bar} } {\text{Width of bar} } = \frac{\text{Count in corresponding bin} } {\text{Width of bar} }.$$<p>However, such histograms are not commonly used in any case, so we will not dwell on this further.  Unfortunately, there is currently no simple way using Python or the course <code>datascience</code> package to generate a proper histogram for a count distribution.</p></div></div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Flat-tops-and-the-negative-consequences-of-binning">Flat tops and the negative consequences of binning<a class="anchor-link" href="#Flat-tops-and-the-negative-consequences-of-binning">¶</a></h3><p>Even though the density scale correctly represents percents using area, some detail is lost by grouping values into bins.</p>
<p>Take a look at the [300, 400) bin in the figure below. The flat top of the bar, at the level 0.405% per million dollars, hides the fact that the movies are somewhat unevenly distributed across that bin.</p></div></div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">millions</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="s1">'Adjusted Gross'</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">300</span><span class="p">,</span> <span class="mi">2000</span><span class="o">+</span><span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">),</span> <span class="n">unit</span><span class="o">=</span><span class="s2">"Million Dollars"</span><span class="p">)</span>
</pre></div></div></div>
<div class="output_png output_subarea ">
<img src="/notebooks-images/Visualizing_Numerical_Distributions_27_0.png"/></div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>To see this, let us split each bin into 10 narrower bins, each of width 10 million dollars.</p></div></div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">millions</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="s1">'Adjusted Gross'</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">300</span><span class="p">,</span> <span class="mi">2000</span><span class="o">+</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span> <span class="n">unit</span><span class="o">=</span><span class="s1">'Million Dollars'</span><span class="p">)</span>
</pre></div></div></div>
<div class="output_png output_subarea ">
<img src="/notebooks-images/Visualizing_Numerical_Distributions_29_0.png"/></div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Some of the skinny bars are taller than 0.405 and others are shorter; the first two have heights of 0 because there are no data between 300 and 320. By putting a flat top at the level 0.405 across the whole bin, we are deciding to ignore the finer detail and are using the flat level as a rough approximation. Often, though not always, this is sufficient for understanding the general shape of the distribution.</p></div></div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><strong>The height as a rough approximation.</strong>
This observation gives us a different way of thinking about the height.
Look again at the [300, 400) bin in the earlier histograms. As we have seen, the bin is 100 million dollars wide and contains 40.5% of the data. Therefore the height of the corresponding bar is 0.405% per million dollars.</p>
<p>Now think of the bin as consisting of 100 narrow bins that are each 1 million dollars wide. The bar's height of "0.405% per million dollars" means that as a rough approximation, 0.405% of the movies are in each of those 100 skinny bins of width 1 million dollars.</p></div></div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Notice that because we have the entire dataset that is being used to draw the histograms, we can draw the histograms to as fine a level of detail as the data and our patience will allow. However, if you are looking at a histogram in a book or on a website, and you don't have access to the underlying dataset, then it becomes important to have a clear understanding of the "rough approximation" created by the flat tops.</p></div></div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Histograms-Q&amp;A">Histograms Q&amp;A<a class="anchor-link" href="#Histograms-Q&amp;A">¶</a></h3><p>Let's draw the histogram again, this time with bins of width 50, and check our understanding of the concepts.</p></div></div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">millions</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="s1">'Adjusted Gross'</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">300</span><span class="p">,</span> <span class="mi">2000</span><span class="o">+</span><span class="mi">50</span><span class="p">,</span> <span class="mi">50</span><span class="p">),</span> <span class="n">unit</span><span class="o">=</span><span class="s1">'Million Dollars'</span><span class="p">)</span>
</pre></div></div></div>
<div class="output_png output_subarea ">
<img src="/notebooks-images/Visualizing_Numerical_Distributions_34_0.png"/></div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">millions</span><span class="o">.</span><span class="n">bin</span><span class="p">(</span><span class="s1">'Adjusted Gross'</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">300</span><span class="p">,</span> <span class="mi">2000</span><span class="o">+</span><span class="mi">50</span><span class="p">,</span> <span class="mi">50</span><span class="p">))</span>
</pre></div></div></div>
<div class="output_html rendered_html output_subarea output_execute_result">
<table border="1" class="dataframe">
    <thead>
        <tr>
            <th>bin</th> <th>Adjusted Gross count</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>300 </td> <td>32                  </td>
        </tr>
    </tbody>
        <tbody><tr>
            <td>350 </td> <td>49                  </td>
        </tr>
    </tbody>
        <tbody><tr>
            <td>400 </td> <td>25                  </td>
        </tr>
    </tbody>
        <tbody><tr>
            <td>450 </td> <td>27                  </td>
        </tr>
    </tbody>
        <tbody><tr>
            <td>500 </td> <td>16                  </td>
        </tr>
    </tbody>
        <tbody><tr>
            <td>550 </td> <td>12                  </td>
        </tr>
    </tbody>
        <tbody><tr>
            <td>600 </td> <td>9                   </td>
        </tr>
    </tbody>
        <tbody><tr>
            <td>650 </td> <td>7                   </td>
        </tr>
    </tbody>
        <tbody><tr>
            <td>700 </td> <td>2                   </td>
        </tr>
    </tbody>
        <tbody><tr>
            <td>750 </td> <td>5                   </td>
        </tr>
    </tbody>
</table>
<p>... (25 rows omitted)</p></div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><strong>Q</strong>: Did more movies make between \$400 and \$450 million, or between \$450 and \$500 million?</p>
<p><strong>A</strong>: Slightly more movies (27 versus 25) made between \$450 and \$500 million.</p>
<p><strong>Q</strong>: Did more movies make between \$450 and \$500 million, or between \$500 and \$600 million?</p>
<p><strong>A</strong>: To find out the number of movies that made between \$500 and $\600 million, we have to add the [500, 550) and [550, 600) bins together.  That gets us 28 movies, so slightly more movies made between \$500 and \$600 million.</p></div></div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Differences-Between-Bar-Charts-and-Histograms">Differences Between Bar Charts and Histograms<a class="anchor-link" href="#Differences-Between-Bar-Charts-and-Histograms">¶</a></h3><ul>
<li>Bar charts display one quantity per category. They are often used to display the distributions of categorical variables. Histograms display the distributions of quantitative variables (numbers). This requires the numbers to be grouped into <em>bins</em>.</li>
<li>In a bar chart, the horizontal axis serves only to organize the bars. To satisfy the area principle, each bar should be drawn with the same width. In a histogram, the horizontal axis is a number line, and bars cover specific, nonoverlapping, contiguous intervals. The area of a bar is therefore equal to its width times its length, which imparts a special meaning and units to the length.</li>
<li>The lengths (possibly called "heights," if the bars are drawn vertically) of the bars in a bar chart are proportional to the value for each category, since the width of each bar can be understood to be 1. The lengths (again, possible called "heights") of bars in a histogram measure densities; the <em>areas</em> of bars in a histogram are proportional to the numbers of entries in the bins.</li>
</ul></div></div></div>